var isMobile = navigator.userAgent.match(/(iPhone|iPod|iPad|BlackBerry|Android)/i) != null;var mdown = "mousedown";var mmove = "mousemove";var mup = "mouseup";if (isMobile){    mdown = "touchstart";    mmove = "touchmove";    mup = "touchend";}$(function() {    $(window).resize(function(){        if ($('.active-menu-item-selector').length > 0){            $('.active-menu-item-selector').css({'top': $(".left-menu-link.active").position().top +8});            $('.active-menu-item-selector').show();        }    });    $(window).resize();    $(".left-menu-link").hover(function () {        $('.active-menu-item-selector').addClass('hover');        $('.active-menu-item-selector').css({'top': $(this).position().top +8});    }, function () {        $('.active-menu-item-selector').removeClass('hover');        $('.active-menu-item-selector').css({'top': $(".left-menu-link.active").position().top +8});    })    $(".menu-icon").on("click", function () {        $(".hidden-menu").toggleClass('active');        $('nav').toggleClass('nohidden');        $("#nav-background").toggleClass('active');        if (!$("#nav-background").hasClass('active')){            $(".nav-back").removeClass('active');        }    });    $(".menu-list a").hover(function () {        $(".nav-back").removeClass('active');        $(".nav-back").eq($(this).parent().index()).addClass('active');    }, function () {        // $(".nav-back").removeClass('active');    });    $('body').on('touchmove', function () {        scrollSecondSlider();        scrollThirdSlider();    });    document.addEventListener('gesturechange', function() {        scrollSecondSlider();        scrollThirdSlider();    });    // document.addEventListener('scroll', function() {    //     scrollSecondSlider();    //     scrollThirdSlider();    // });    $(window).scroll(function () {        var st = $(window).scrollTop();        if (st > 10){            $("nav").addClass('scroll');        }else{            $("nav").removeClass('scroll');        }        if ($("#nav-background").length > 0){            scrollSecondSlider();            scrollThirdSlider();            if ($("#hmt").prop('checked')){                $(".menu-icon").click();            }            // $(".btn-menu-bg").css({"opacity": (st*2 / $(".first-screen").height())});            if (st > $(".fourth-screen").position().top - $(".first-screen").height()/2){                showTasks();            }            var cl_h = $(".first-screen").height();            if ((st>145 && st< cl_h*0.56+145) || ($('.second-slider').position().top < -145 && st<$(".sixth-screen").position().top - cl_h + 145)){                $('.soc-icons a').eq(0).addClass('invert');            }else{                $('.soc-icons a').eq(0).removeClass('invert');            }            if ((st>100 && st< cl_h*0.56+100) || ($('.second-slider').position().top < -100 && st<$(".sixth-screen").position().top - cl_h + 100)){                $('.soc-icons a').eq(1).addClass('invert');            }else{                $('.soc-icons a').eq(1).removeClass('invert');            }            if ((st>65 && st< cl_h*0.56+65) || ($('.second-slider').position().top < -65 && st<$(".sixth-screen").position().top - cl_h + 65)){                $('.soc-icons a').eq(2).addClass('invert');            }else{                $('.soc-icons a').eq(2).removeClass('invert');            }            if ((st>cl_h/2 && $('.second-slider').position().top > -cl_h*0.05) || ($('.second-slider').position().top < -cl_h*0.51 && st<$(".sixth-screen").position().top - cl_h/2)){                $('.btn-menu .menu-icon').addClass('invert');            }else{                $('.btn-menu .menu-icon').removeClass('invert');            }            if ((st>cl_h - 45 && $('.second-slider').position().top > -cl_h*0.44 - 45) || ($('.second-slider').position().top < -cl_h + 45 && st<$(".sixth-screen").position().top - 35)){                $('.logo').addClass('invert');            }else{                $('.logo').removeClass('invert');            }        }    });    $('.faq-list-item').on('click', function () {        $(this).toggleClass('active');        if ($(this).hasClass('active')){            $(this).find(".answer-text").slideDown(300);        }else{            $(this).find(".answer-text").slideUp(300);        }    });    var tasks = document.getElementsByClassName("task-item");    for(var i = 0; i < tasks.length; i++){        tasks[i].addEventListener('mousemove', moveTask)    }    $(".task-item").hover(function () {    }, function () {        $(this).css({'transform': 'perspective(500px) scale(1) rotateX(0deg) rotateY(0deg)'});    })    $(".sixth-screen a").hover(function () {        $(".sixth-screen-bg").addClass('hover');    }, function () {        $(".sixth-screen-bg").removeClass('hover');    })    $(".see-also a").hover(function () {        $(".see-also-screen-bg").addClass('hover');    }, function () {        $(".see-also-screen-bg").removeClass('hover');    })    $('body').on('mousemove', function (e) {        if ($("#nav-background").length > 0) {            var posx = e.pageX - $(".slide-title").offset().left - 1920 / 2;            var posy = e.pageY - $(".slide-title").offset().top - 1920 / 2;            $(".slide-title").css({'background-position': posx + 'px ' + posy + 'px'});        }    });    var tasks_swiper = new Swiper('.fixed-slider', {        slidesPerView: 'auto',        spaceBetween: 0,        pagination: {            el: '.tasks-slider-dots',            clickable: true,        },    });    $('.participate-btn').on('click', function () {        $(".popup.auth").addClass('active');    });    $('.sixth-screen a').on('click', function () {        $(".popup.auth").addClass('active');        return false;    });    $('.fourth-screen .list-item').on('click', function () {        $(".popup.auth").addClass('active');    });    $('header button').on('click', function () {        $(".popup.auth").addClass('active');    });    $('.user-account-buttons button').on('click', function () {        $(".popup.auth").addClass('active');    });    $('.menu-list a').on('click', function () {        $(".popup.auth").addClass('active');        return false;    });    $('.popup-close').on('click', function () {        $(".popup.auth").removeClass('active');    });    $('.popup-window .enter-btn').on('click', function () {        $(".popup").addClass('steps step1');        return false;    });    $('.popup-window .next-btn').on('click', function () {        if (!$(".popup").hasClass('step2')){            $(".popup").addClass('step2');        }else if (!$(".popup").hasClass('step3')){            $(".popup").addClass('step3');        }else if (!$(".popup").hasClass('step4')){            $(".popup").addClass('step4');        }else if (!$(".popup").hasClass('step5')){            $(".popup").addClass('step5');        }        return false;    });    $('.popup-window .miss-btn').on('click', function () {        if (!$(".popup").hasClass('step2')){            $(".popup").addClass('step2');        }else if (!$(".popup").hasClass('step3')){            $(".popup").addClass('step3');        }else if (!$(".popup").hasClass('step4')){            $(".popup").addClass('step4');        }else if (!$(".popup").hasClass('step5')){            $(".popup").addClass('step5');        }        return false;    });    $('.popup-window .back-btn').on('click', function () {        if ($(".popup").hasClass('step5')){            $(".popup").removeClass('step5');        }else if ($(".popup").hasClass('step4')){            $(".popup").removeClass('step4');        }else if ($(".popup").hasClass('step3')){            $(".popup").removeClass('step3');        }else if ($(".popup").hasClass('step2')){            $(".popup").removeClass('step2');        }        return false;    });    $('.popup-window .ready-btn').on('click', function () {        window.location = 'zadanie2.html';        return false;    });});function showTasks() {    setTimeout(function () {        $(".task-item").addClass('active');        setTimeout(function () {            $(".task-item").addClass('pointer');        },800)    },400)}function moveTask(e) {    var xpos = e.layerX    var ypos = e.layerY    var yrot = -5 * ((xpos - this.clientWidth / 2) / this.clientWidth)    var xrot = 5 * ((ypos - this.clientHeight / 2) / this.clientHeight)    var transformstring = 'perspective(500px) scale(1) rotateX(' + xrot + 'deg) rotateY(' + yrot + 'deg)'    this.style.transform = transformstring}function scrollSecondSlider() {    var st = $(window).scrollTop();    if (document.body.clientWidth > 480){        if (st < $(".first-screen").height()*1){            $(".second-slider").css({"top": $(".first-screen").height() - st});        }else if (st >= $(".first-screen").height()*2.75){            $(".second-slider").css({"top": $(".first-screen").height()*2.75 - st});        }else{            $(".second-slider").css({"top": 0});        }        if (st < $(".first-screen").height()*1.25){            $(".second-slider-image").css({"left": "0%"});            $(".second-slider .slide1").css({"left": "0%"});        }else if (st >= $(".first-screen").height()*2.25){            $(".second-slider-image").css({"left": "-100%"});            $(".second-slider .slide1").css({"left": "-100%"});        }else{            $(".second-slider-image").css({"left": (3.25 - st / $(".first-screen").height()) * 100 - 200 + "%"});            $(".second-slider .slide1").css({"left": (3.25 - st / $(".first-screen").height()) * 100 - 200 + "%"});        }    }else{        if (st < $(".first-screen").height()*1){            $(".second-slider").css({"position": 'absolute'});            $(".second-slider").css({"top": 0, 'height':$(".first-screen").height()});        }else if (st >= $(".first-screen").height()*2.75){            // var tp = $(".first-screen").height()*2.75 - st;            // if (tp > 0){            //     tp = 0;            // }            $(".second-slider").css({"position": 'absolute'});            // $(".second-slider").css({"top": 'auto', 'bottom': -150, 'height':'100vh'});            $(".second-slider").css({"top": 'auto', 'bottom': 0, 'height':$(".first-screen").height()});        }else{            $(".second-slider").css({"position": 'fixed'});            $(".second-slider").css({"top": 0, 'height':$(".first-screen").height()});        }        if (st < $(".first-screen").height()*1.25){            $(".second-slider-image").css({"left": "0%"});            $(".second-slider .slide1 .top-block").eq(0).css({"top": "0%"});        }else if (st >= $(".first-screen").height()*2.25){            $(".second-slider .slide1 .top-block").eq(0).css({"top": $(".first-screen").height()*1.25 - st});            $(".second-slider-image").css({"left": "-100%"});        }else{            $(".second-slider .slide1 .top-block").eq(0).css({"top": $(".first-screen").height()*1.25 - st});            $(".second-slider-image").css({"left": (3.25 - st / $(".first-screen").height()) * 100 - 200 + "%"});        }    }}function scrollThirdSlider() {    var size = 3;    var proc = 0;    var hkoef = 1;    var st = $(window).scrollTop();    if (document.body.clientWidth > 480) {        if (st < $(".first-screen").height() * 3.75) {            $(".third-slider").css({"top": $(".first-screen").height() * 3.75 - st});        } else if (st >= $(".first-screen").height() * 5.25) {            $(".third-slider").css({"top": $(".first-screen").height() * 5.25 - st});        } else {            $(".third-slider").css({"top": 0});        }        if (st < $(".first-screen").height() * 4) {            $(".right-block").css({'right': "-48%"});            $(".third-slider .slide1 .left-block .participate-btn").removeClass("active");            size = 3;            proc = 0;            hkoef = 1;        } else if (st >= $(".first-screen").height() * 5) {            $(".right-block").css({'right': 0});            $(".third-slider .slide1 .left-block .participate-btn").addClass("active");            size = 1.9;            proc = 1;            hkoef = 1;        } else {            $(".third-slider .slide1 .left-block .participate-btn").removeClass("active");            var rt = (st - $(".first-screen").height() * 4) * 48 / $(".first-screen").height();            $(".right-block").css({'right': -(48 - rt) + "%"});            size = 3 * ((48 - rt) / 48);            if (size < 1.9) {                size = 1.9;            }            if (size > 3) {                size = 3;            }            proc = 1 - (48 - rt) / 48;            hkoef = 1;        }        if (st < $(".first-screen").height() * 4) {            $(".third-slider .slide1 .left-block .participate-btn").removeClass("active");            $(".prize-block").removeClass("active");        } else if (st >= $(".first-screen").height() * 5) {            $(".third-slider .slide1 .left-block .participate-btn").addClass("active");            $(".prize-block").addClass("active");        } else {            $(".third-slider .slide1 .left-block .participate-btn").removeClass("active");            $(".prize-block").removeClass("active");        }        $(".third-slider .slide1 .left-block").css({'height': 100 * hkoef + "%"});        $(".left-block-text h2").css({'font-size': size + "vw", 'line-height': size * 1.1 + "vw"});        $(".left-block-text").each(function () {            var elem = $(this).find('h2');            var max_pad = ($(".left-block").width() - $(this).width()) / 2;            var lft = max_pad * (2 - proc * 2);            if (lft > max_pad) {                lft = max_pad;            } else {            }            $(this).css({"left": lft});        });    }else{        if (st < $(".first-screen").height() * 3.75) {            $(".third-slider").css({"position": 'absolute'});            $(".third-slider").css({'height':'100vh'});            $(".third-slider").css({"top": 0});        } else if (st >= $(".first-screen").height() * 6.50) {            $(".third-slider").css({"position": 'absolute'});            $(".third-slider").css({"top": 'auto', 'bottom': 0, 'height':'100vh'});            // $(".third-slider").css({"top": $(".first-screen").height() * 6.25 - st});        } else {            $(".third-slider").css({"position": 'fixed'});            $(".third-slider").css({'height':'100%'});            $(".third-slider").css({"top": 0});        }        if (st < $(".first-screen").height() * 3.75) {            size = 1;            op = 1;            proc = 0;        } else if (st >= $(".first-screen").height() * 4.75) {            size = 10;            op = 0;            proc = 1;        } else {            var rt = (st - $(".first-screen").height() * 3.75) / $(".first-screen").height();            size = 10*rt;            if (size < 1) {                size = 1;            }            if (size > 10) {                size = 10;            }            if (size > 8){                op = (10 - size) / 2;            }            proc = 1 - (48 - rt) / 48;        }        $(".third-slider .slide1 .left-block").css({'transform':"scale("+size+")", "opacity": op});        if (st < $(".first-screen").height() * 4.75) {            proc = 0;        } else if (st >= $(".first-screen").height() * 6.75) {            proc = 0.01;        } else {            var rt = (st - $(".first-screen").height() * 4.75) / $(".first-screen").height();            proc = 1 - (48 - rt) / 48;            if (proc > 0.01){                proc = 0.01;            }        }        $("#mobile-gopro").css({'transform':'scale('+(0.5+proc*50)+')', 'opacity': proc*100, 'background-position': '0px '+(40 - proc*1000)+'%'});        if (st < $(".mobile-gopro-text").height() * 5) {            proc = 0;        } else if (st >= $(".first-screen").height() * 7) {            proc = 0.01;        } else {            var rt = (st - $(".first-screen").height() * 5) / $(".first-screen").height();            proc = 1 - (48 - rt) / 48;            if (proc > 0.01){                proc = 0.01;            }        }        $(".third-slider").height($(".first-slider").height());        $("#mobile-gopro-text").css({'transform':'scale('+(0.5+proc*50)+')', 'opacity': proc*100, 'margin-top': (50 - proc*1000)+'%'});    }}